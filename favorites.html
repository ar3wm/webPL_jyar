<!doctype html>
    <html>
        <head>
            <link rel="stylesheet" href="styles/main.css">
            <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" />  -->
            <meta charset="UTF-8">
            <title>
                Favorites
            </title>
        </head>
        <body>
            <div class = "row">
                <div class="column">
                    &nbsp;
                    <!--Empty Column-->
                </div>

                <div class="column">
                    <h1 style="color:black;">
                        <center>
                            Favorites
                        </center>
                    </h1>
                </div>

                <div class="column" align="right">
                    <!--sign in button-->
                    <button type="button" style="height: 25px; width: 100px;"
                    onclick="window.location.href='signInPage.html';">Sign In</button>
                </div>
            </div>
            <ul>
                <li><a class="active" href="home.html">Home</a></li>
                <li><a href="classSchedule.html">Classes</a></li>
                <li><a href="todo.html">To Do</a></li>
                <li><a href="favorites.html">Favorites</a></li>
            </ul>



            <div class="container">
                <!-- <h1>Favorites</h1> -->
            
                <form name="mainform" >
                
                  <div class="form-group">
                    <label for="name-of-site">Name of Site</label>
                    <input type="text" id="name-of-site" class="form-control" name="desc" />
                    <span class="error" id="name-of-site-note"></span>        
                  </div>
                  
                  <div class="form-group">
                    <label for="link">Link</label>  
                    <input type="text" id="link" class="form-control" />  
                    <span class="error" id="link-note"></span>
                  </div>
                            
                  <input type="button" class="btn btn-light" id="add" value="Add Favorite" onclick="addRow()"/> 
                </form>
            
                <br/>
 
                <div id="favorites">
                  <table id="favoritesTable" class="table" >
                    <thead>   <!-- set table headers -->
                      <tr>
                        <th>Title</th>
                        <th>Link</th>
                        <th>test</th>
                        <th>(Remove)</th>
                      </tr> 
                      <!-- <tr>
                          <td onclick="location.href=document.getElementById"></td>
                      </tr> -->
                    </thead>
            
                    <!-- 8. write JS to dynamically create add new row upon form submission -->
                    <script>
                      function addRow(){
                        var siteName = document.getElementById("name-of-site").value;
                        var siteLink = document.getElementById("link").value;
                        
                        var linker = (function() {
                            if(siteLink.substring(0,7) != "http://" && siteLink.substring(0,8) != "https://") {
                                siteLink = "http://" + siteLink;
                            }
                            else if(siteLink.substring(0,7) != "http://" && siteLink.substring(0,8) == "https://"){
                                siteLink = siteLink;
                            }
                            else if(siteLink.substring(0,7) == "http://" && siteLink.substring(0,8) != "https://") {
                                siteLink = siteLink;
                            }
                        }());
                        
                        var deleteBut = "<input type:=button value='  X  ' onClick='delRow()'>";
                        // var siteTest = "<a href= onClick='location.href=siteLink'>siteName</a>";
                        // var siteTest = "<p id='(siteName)' onClick='window.location.href='(siteLink)''>siteName</p>";
                        // var siteTest = "<input type='button' value='$(siteName)' onClick='openLink(siteLink)'/>";
                        var siteTest = "<p id='hyperlinker' >" + siteName + "</p>"
                        

                        // var siteTestlink=siteTest.document.getElementById("hyperlinker").write('<a href="' + siteLink + '">' + siteName + '</a>');
                        //array containing the row data)
                        var rowdata = [siteName, siteLink, siteTest, deleteBut];
            
                        var tableRef = document.getElementById("favoritesTable");
                        var newRow = tableRef.insertRow(tableRef.rows.length);
                        newRow.onmouseover = () => {tableRef.clickedRowIndex = this.rowIndex}
                        var newCell = "";       
                        var i = 0;          // In this example, each row has 4 columns. 
                        // Use insertCell(index) method to insert new cells (<td> elements) at the 1st, 2nd, 3rd position of the new <tr> element        	      
                        while (i < 4){
                          newCell = newRow.insertCell(i);            // specify which column 
                        //   newCell.innerHTML = rowdata[i];            // assign what content 
                            
                            newCell.innerHTML = rowdata[i];
                            // newCell.innerHTML.href = document.getElementById("link").value;
                            // newCell.innerHTML = rowdata[i] +"<a href='"+document.getElementById("link").value+"'>rowdata[i]</a>";
                        // }
                          newCell.onmouseover = this.rowIndex;       // attach row index to the row
                          i++;
                        }
                        document.getElementById("hyperlinker").innerHTML = "<a href='" + siteLink + "'>" + siteName + "</a>";

                        document.getElementById("name-of-site").value = '';
                        document.getElementById("link").value = '';
                      }

                      function delRow(){
                        document.getElementById("favoritesTable").deleteRow(document.getElementById("favoritesTable").clickedRowIndex);
                      }
                    </script>
                    
                  </table> 
                </div>
              </div> 

        </body>